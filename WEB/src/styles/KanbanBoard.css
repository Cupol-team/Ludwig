/* Стили для страницы с канбан-доской */
.workspace-container {
  /* Удаляем height: 100vh, так как это вызывает конфликт */
  /* Удаляем margin: 0 и padding: 0, чтобы не переопределять отступы из Workspace.css */
  overflow: hidden; /* Сохраняем запрет прокрутки */
}

/* Новый класс специфичный для доски, чтобы не было конфликтов */
.board-container {
  height: calc(100vh - 120px); /* Учитываем высоту заголовка и табов */
  overflow: hidden;
  margin-top: 20px; /* Добавляем отступ сверху от табов */
}

/* Глобальные стили для состояния перетаскивания */
body.board-is-dragging {
  cursor: grabbing !important;
}

body.board-is-dragging * {
  cursor: grabbing !important;
}

/* Изменение вида курсора при наведении на колонку во время перетаскивания */
body.board-is-dragging .kanban-column {
  cursor: grabbing !important;
}

/* Когда мы перетаскиваем задачу, выделяем все колонки для улучшения UX */
body.board-is-dragging .kanban-column-content {
  border: 2px dashed rgba(139, 92, 246, 0.3);
  background-color: rgba(240, 240, 240, 0.2);
}

/* А когда наводим на конкретную колонку, делаем её более заметной */
body.board-is-dragging .kanban-column-content:hover {
  border-color: #8b5cf6;
  background-color: rgba(139, 92, 246, 0.1);
}

/* Общие стили для доски */
.kanban-board {
  display: flex;
  gap: 20px;
  padding: 20px;
  overflow-x: auto; /* Разрешаем горизонтальную прокрутку */
  overflow-y: hidden; /* Предотвращаем вертикальную прокрутку самой доски */
  /* Пересчитываем высоту доски для нового контейнера */
  height: calc(100% - 40px); /* Учитываем padding и подсказку */
  margin-bottom: 20px;
  /* Улучшаем прокрутку */
  scrollbar-width: thin;
  scrollbar-color: #ccc transparent;
  /* Для лучшей поддержки мобильных устройств */
  -webkit-overflow-scrolling: touch; /* Плавная инерционная прокрутка на iOS */
  scroll-snap-type: x proximity; /* Элементы "притягиваются" при прокрутке */
  scroll-padding: 20px; /* Отступы при прокрутке */
}

/* Стилизация скроллбаров для WebKit браузеров */
.kanban-board::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

.kanban-board::-webkit-scrollbar-track {
  background: transparent;
}

.kanban-board::-webkit-scrollbar-thumb {
  background-color: #ccc;
  border-radius: 6px;
  border: 3px solid #f9f9f9;
}

/* Стили для каждой колонки доски */
.kanban-column {
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 15px;
  flex: 0 0 350px; /* Фиксированная ширина для горизонтальной прокрутки */
  min-height: 400px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease;
  overflow: hidden;
  /* Максимальная и минимальная ширина колонки */
  max-width: 350px;
  min-width: 250px;
  /* Используем flex для упорядочивания содержимого */
  display: flex;
  flex-direction: column;
  /* Привязка для плавной прокрутки */
  scroll-snap-align: start; /* Колонки будут "притягиваться" при прокрутке */
}

/* Выделение колонки при наведении для обеспечения лучшего UX при перетаскивании
   Убран эффект смещения transform, который вызывал "дрыгание" */
.kanban-column:hover {
  background-color: #f0f0f0;
}

/* Стиль для заголовка колонки */
.kanban-column-header {
  font-size: 1.2rem;
  font-weight: 600;
  color: #333;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #e0e0e0;
  padding-bottom: 8px;
  /* Обеспечиваем правильное обрезание текста */
  overflow: hidden;
  width: 100%;
  box-sizing: border-box;
}

/* Прокрутка для содержимого колонки, если требуется */
.kanban-column-content {
  flex: 1;
  overflow-y: auto;
  /* Позволяем содержимому корректно масштабироваться внутри flex-контейнера */
  min-height: 300px;
  padding: 10px;
  /* Пересчитываем максимальную высоту, чтобы она соответствовала новому контейнеру */
  max-height: calc(100vh - 250px);
  /* Явное указание того, что элемент может быть целью перетаскивания */
  touch-action: none;
  /* Улучшаем отображение области для перетаскивания */
  position: relative;
  border-radius: 6px;
  transition: background-color 0.3s ease;
}

/* При наведении на содержимое колонки делаем его более заметным для пользователя */
.kanban-column-content:hover {
  background-color: rgba(240, 240, 240, 0.5);
}

/* Стиль для колонки, когда над ней что-то перетаскивается (active drop target) */
.kanban-column-content.drop-target {
  background-color: rgba(139, 92, 246, 0.1);
  border: 2px dashed #8b5cf6;
  padding: 8px; /* Компенсируем border */
}

/* Пустая колонка должна иметь минимальную высоту для удобного перетаскивания */
.kanban-column-content:empty {
  min-height: 300px;
  border: 2px dashed #ddd;
  display: flex;
  align-items: center;
  justify-content: center;
}

.kanban-task-card {
  background-color: #fff;
  border-radius: 4px;
  padding: 8px;
  margin-bottom: 12px; /* Немного увеличиваем зазор между карточками */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.kanban-task-title {
  font-size: 1em;
  margin: 0 0 4px;
}

.kanban-task-description {
  font-size: 0.9em;
  color: #555;
  margin: 0;
}

/* Добавляем отступ снизу у последней карточки задачи */
.kanban-task-card:last-child {
  margin-bottom: 100px;
}

/* Если в колонке нет задач, добавляем отступ в блоке «Нет задач» */
.kanban-empty {
  padding-bottom: 32px;
  min-height: 200px; /* Минимальная высота для пустых колонок */
  display: flex;
  align-items: center;
  justify-content: center;
  color: #999;
  font-style: italic;
  border: 2px dashed #ddd;
  border-radius: 6px;
  margin: 10px 0;
}

/* Стиль для активного перетаскивания - делает колонки более заметными */
.board-is-dragging .kanban-column {
  border: 2px dashed transparent;
  transition: border-color 0.3s ease;
}

.board-is-dragging .kanban-column:hover {
  border-color: #8b5cf6;
}

/* Явная инструкция для мобильных устройств */
.mobile-scroll-hint {
  display: none; /* По умолчанию скрыт */
  text-align: center;
  padding: 8px;
  background-color: rgba(139, 92, 246, 0.1);
  border-radius: 4px;
  margin-bottom: 10px;
  font-size: 14px;
  color: #666;
}

/* Показываем подсказку только на мобильных устройствах */
@media (max-width: 768px) {
  .mobile-scroll-hint {
    display: block;
  }
  
  /* Улучшаем прокрутку на мобильных устройствах */
  .kanban-board {
    flex-direction: row; /* Сохраняем горизонтальную прокрутку на мобильных устройствах */
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    gap: 15px;
    padding: 15px;
    height: calc(100% - 40px); /* Используем 100% от board-container, учитывая отступы */
  }
  
  .kanban-column {
    flex: 0 0 85%; /* Колонки занимают 85% ширины экрана для лучшей видимости на мобильных */
    display: inline-flex; /* Для поддержки horizontal scrolling */ 
    max-width: 85%;
    min-width: 85%;
  }
} 