import { NavLink, Outlet, useParams } from "react-router-dom";
import { ProjectProvider, ProjectContext } from "../../context/ProjectContext";
import "./Workspace.css";
import { useContext, useEffect } from "react";

function Workspace() {
  const { orgId, projectUuid } = useParams();
  const baseUrl = `/organizations/${orgId}/project/${projectUuid}/workspace`;
  const { projectName, projectDescription } = useContext(ProjectContext);
  
  useEffect(() => {
    if (!projectName && projectUuid) {
      // Здесь можно добавить код для загрузки данных проекта, если они не были переданы через контекст
      // Например, запрос к API для получения деталей проекта
    }
  }, [projectName, projectUuid]);

  return (
    <div className="workspace-container">
      <nav className="workspace-tabs">
        <NavLink 
          to={`${baseUrl}/board`} 
          className={({ isActive }) => isActive ? "active-tab" : ""}
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
            <rect x="3" y="14" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
            <rect x="14" y="3" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
            <rect x="14" y="14" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
          </svg>
          Доска
        </NavLink>
        <NavLink 
          to={`${baseUrl}/tasks`} 
          className={({ isActive }) => isActive ? "active-tab" : ""}
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            <path d="M4 8L4 16C4 17.1046 4.89543 18 6 18L18 18C19.1046 18 20 17.1046 20 16V8C20 6.89543 19.1046 6 18 6L6 6C4.89543 6 4 6.89543 4 8Z" stroke="currentColor" strokeWidth="2"/>
          </svg>
          Таски
        </NavLink>
        <NavLink 
          to={`${baseUrl}/settings`} 
          className={({ isActive }) => isActive ? "active-tab" : ""}
        >
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" strokeWidth="2"/>
            <path d="M19.4 15.05C19.2669 15.3885 19.2272 15.7573 19.286 16.1177C19.3448 16.478 19.5002 16.8157 19.74 17.1L19.79 17.15C20.0069 17.3673 20.1785 17.624 20.2936 17.9046C20.4086 18.1852 20.4648 18.4838 20.4584 18.7842C20.452 19.0845 20.3833 19.3802 20.2563 19.6552C20.1293 19.9302 19.9467 20.1792 19.72 20.3875C19.4933 20.5958 19.2276 20.7588 18.9393 20.8655C18.651 20.9722 18.3464 21.021 18.0414 21.0084C17.7364 20.9958 17.4375 20.9221 17.1597 20.7916C16.8819 20.6611 16.6314 20.4761 16.42 20.25L16.37 20.2C16.0856 19.9599 15.7478 19.8044 15.3873 19.7456C15.0269 19.6869 14.6581 19.7265 14.32 19.86C13.9896 19.9879 13.7096 20.2222 13.5209 20.525C13.3322 20.8278 13.2447 21.1842 13.27 21.54C13.2747 21.842 13.218 22.1415 13.103 22.4193C12.988 22.6971 12.8169 22.9478 12.6 23.1573C12.383 23.3667 12.1249 23.5301 11.8431 23.6373C11.5613 23.7444 11.2613 23.7929 10.96 23.78C10.6587 23.7806 10.3598 23.7204 10.0818 23.603C9.80371 23.4855 9.55105 23.3132 9.34118 23.0965C9.13132 22.8798 8.97055 22.6233 8.86642 22.3411C8.76229 22.059 8.7162 21.7582 8.73 21.46C8.75468 21.1271 8.67123 20.7949 8.49054 20.5074C8.30984 20.22 8.0423 19.9925 7.73 19.86C7.39193 19.7265 7.02314 19.6868 6.66273 19.7456C6.30232 19.8044 5.96438 19.9599 5.68 20.2L5.63 20.25C5.41863 20.4761 5.16814 20.6611 4.89034 20.7916C4.61254 20.9221 4.31361 20.9958 4.00864 21.0084C3.70368 21.021 3.39902 20.9722 3.11074 20.8655C2.82246 20.7588 2.55671 20.5958 2.33002 20.3875C2.10332 20.1792 1.92074 19.9302 1.79374 19.6552C1.66674 19.3802 1.59797 19.0845 1.59158 18.7842C1.5852 18.4838 1.64139 18.1852 1.75642 17.9046C1.87144 17.624 2.04301 17.3673 2.26 17.15L2.31 17.1C2.54978 16.8157 2.70516 16.478 2.76399 16.1177C2.82282 15.7573 2.78305 15.3885 2.65 15.05C2.52214 14.7196 2.28783 14.4396 1.98499 14.2509C1.68216 14.0622 1.32582 13.9747 0.97 14C0.668392 13.9971 0.369688 13.9415 0.0923379 13.8272C-0.185012 13.713 -0.435678 13.5424 -0.645519 13.3257C-0.85536 13.109 -1.01883 12.8509 -1.12578 12.5691C-1.23273 12.2873 -1.28092 11.9873 -1.27 11.686C-1.27061 11.3847 -1.21043 11.0858 -1.09296 10.8078C-0.97549 10.5297 -0.803239 10.2771 -0.586523 10.0672C-0.369807 9.85735 -0.113265 9.69658 0.168881 9.59245C0.451027 9.48831 0.751834 9.44223 1.05 9.456C1.38291 9.48067 1.71516 9.39723 2.00256 9.21653C2.28996 9.03584 2.51752 8.7683 2.65 8.456C2.78305 8.11752 2.82282 7.74873 2.76399 7.38832C2.70516 7.02791 2.54978 6.69024 2.31 6.406L2.26 6.356C2.03402 6.13876 1.86272 5.87901 1.7592 5.59303C1.65567 5.30706 1.60219 5.00271 1.6 4.696C1.59966 4.40789 1.6577 4.12237 1.77202 3.85457C1.88635 3.58677 2.05607 3.34303 2.27 3.139C2.48698 2.92397 2.74696 2.75481 3.03349 2.64264C3.32003 2.53047 3.62848 2.47753 3.94 2.486C4.24131 2.4889 4.54022 2.55447 4.81757 2.67652C5.09492 2.79857 5.34551 2.9751 5.55 3.196L5.6 3.246C5.88438 3.48614 6.22232 3.64152 6.58273 3.70035C6.94314 3.75918 7.31193 3.71941 7.65 3.586H7.73C8.06043 3.45811 8.34039 3.2238 8.52906 2.92096C8.71773 2.61813 8.80525 2.26179 8.78 1.906C8.78291 1.60439 8.84172 1.30748 8.95671 1.03013C9.0717 0.752775 9.24225 0.502109 9.45898 0.29227C9.67572 0.0824294 9.93376 -0.0810443 10.2156 -0.187991C10.4974 -0.294938 10.7974 -0.343134 11.0987 -0.332216C11.4 -0.332829 11.6989 -0.272646 11.9769 -0.155173C12.255 -0.0376997 12.5076 0.134539 12.7175 0.351255C12.9273 0.567971 13.0881 0.824513 13.1922 1.10666C13.2963 1.38881 13.3424 1.68961 13.3287 1.98778C13.304 2.32069 13.3874 2.65294 13.5681 2.94034C13.7488 3.22774 14.0164 3.4553 14.3287 3.58778C14.6671 3.72083 15.0359 3.7606 15.3963 3.70177C15.7567 3.64294 16.0944 3.48756 16.3787 3.24778L16.4287 3.19778C16.6459 2.98089 16.9057 2.8093 17.1916 2.70577C17.4776 2.60224 17.7819 2.56662 18.0887 2.60226C18.3968 2.60193 18.6823 2.65997 18.9501 2.77429C19.2179 2.88862 19.4617 3.05834 19.6657 3.27226C19.8807 3.48925 20.0499 3.74922 20.1621 4.03576C20.2742 4.3223 20.3272 4.63074 20.3187 4.94226C20.3158 5.24358 20.2502 5.54248 20.1282 5.81983C20.0061 6.09718 19.8296 6.34777 19.6087 6.55226L19.5587 6.60226C19.3189 6.88665 19.1635 7.22458 19.1047 7.58499C19.0459 7.9454 19.0856 8.31419 19.2187 8.65226V8.73226C19.3466 9.06269 19.5809 9.34265 19.8837 9.53132C20.1866 9.71999 20.5429 9.80751 20.9 9.78226H21.0187C21.3203 9.78517 21.6172 9.84398 21.8946 9.95897C22.1719 10.074 22.4226 10.2445 22.6324 10.4612C22.8423 10.678 23.0057 10.936 23.1127 11.2178C23.2196 11.4996 23.2678 11.7996 23.2569 12.1009C23.2575 12.4022 23.1973 12.7011 23.0798 12.9792C22.9624 13.2572 22.79 13.5099 22.5733 13.7197C22.3566 13.9296 22.1001 14.0903 21.818 14.1945C21.5358 14.2986 21.235 14.3447 20.9369 14.3323C20.6048 14.3539 20.2737 14.4347 19.9781 14.6121C19.6824 14.7896 19.4337 15.0565 19.26 15.38L19.4 15.05Z" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
          Настройки
        </NavLink>
        <NavLink
            to={`${baseUrl}/files`}
            className={({ isActive }) => isActive ? "active-tab" : ""}
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            <path d="M12 18V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            <path d="M9 15H15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
          Файлообменник
        </NavLink>
        <NavLink
            to={`${baseUrl}/calls`}
            className={({ isActive }) => isActive ? "active-tab" : ""}
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 16.92V19.92C22.0011 20.1985 21.9441 20.4741 21.8327 20.7293C21.7214 20.9845 21.5577 21.2136 21.3525 21.4018C21.1473 21.5901 20.905 21.7335 20.6412 21.8227C20.3773 21.9119 20.0978 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.19 12.85C3.49998 10.2412 2.44824 7.27097 2.12 4.18C2.09501 3.90347 2.12788 3.62476 2.21649 3.36163C2.3051 3.09849 2.4475 2.85669 2.635 2.65172C2.82254 2.44675 3.05011 2.28281 3.30379 2.17062C3.55748 2.05843 3.83212 2.00036 4.11 2H7.11C7.59531 1.99523 8.06579 2.16708 8.43376 2.48353C8.80173 2.79999 9.04208 3.23945 9.11 3.72C9.23662 4.68007 9.47145 5.62273 9.81 6.53C9.94455 6.88792 9.97366 7.27691 9.89391 7.65088C9.81415 8.02485 9.62886 8.36811 9.36 8.64L8.09 9.91C9.51355 12.4135 11.5865 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9752 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0554 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
          Звонки
        </NavLink>
      </nav>
      <div className="workspace-content">
        <ProjectProvider>
          <Outlet />
        </ProjectProvider>
      </div>
    </div>
  );
}

export default Workspace; 